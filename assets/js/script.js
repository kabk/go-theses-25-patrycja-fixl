function docReady(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}function unBlurOnView(e){let t=e=>{e.forEach(e=>{e.isIntersecting?e.target.style.filter="none":e.target.removeAttribute("style")})},l=new IntersectionObserver(t,{rootMargin:"0px 0px -70%",threshold:0});document.querySelectorAll("section.chapter h2, section.chapter p, section.chapter figure, section.chapter figcaption").forEach(e=>{l.observe(e)})}docReady(function(){var e=document.getElementById("toggle-btn");e?e.addEventListener("click",function e(){var t=document.getElementById("terms");if(t.classList.contains("active")){let l=t.querySelectorAll(".active.accordion");for(let n of l){n.classList.remove("active");let r=n.parentElement.querySelector(".panel");r&&(r.style.maxHeight="")}t.classList.remove("transition"),setTimeout(function(e){t.classList.remove("active")},250)}else t.classList.add("active"),setTimeout(function(e){t.classList.add("transition")},1)}):console.error("Button not found: #toggle-btn");let t=document.querySelector('a[href="#abstract"]'),l=document.querySelector('a[href="#intro"]'),n=document.querySelector('a[href="#chapter-1"]'),r=document.querySelector('a[href="#chapter-2"]'),a=document.querySelector('a[href="#chapter-3"]'),c=document.querySelector('a[href="#chapter-4"]'),o=document.querySelector('a[href="#epilogue"]'),s=document.getElementById("abstract-title"),d=document.getElementById("abstract-text"),y=document.getElementById("intro-title"),g=document.getElementById("intro-text"),p=document.getElementById("chapter-1-title"),h=document.getElementById("chapter-1-text"),m=document.getElementById("chapter-2-title"),f=document.getElementById("chapter-2-text"),u=document.getElementById("chapter-3-title"),v=document.getElementById("chapter-3-text"),x=document.getElementById("chapter-4-title"),E=document.getElementById("chapter-4-text"),L=document.getElementById("epilogue-title"),B=document.getElementById("epilogue-text"),I=[{link:t,title:s,text:d},{link:l,title:y,text:g},{link:n,title:p,text:h},{link:r,title:m,text:f},{link:a,title:u,text:v},{link:c,title:x,text:E},{link:o,title:L,text:B},];I.forEach(e=>{e.link.addEventListener("click",function(t){var l,n,r;l=t,n=e.title,r=e.text,l.preventDefault(),n.style.filter="none",r.style.filter="none",n.scrollIntoView({behavior:"smooth"})})});let S=document.querySelectorAll("main #abstract-title, main section.chapter"),q=document.querySelectorAll(".index a"),b=document.querySelector(".circle"),$=document.querySelector("main");function k(){let e=S.length,t=window.innerWidth<=844?window.scrollY:$.scrollTop;for(;--e&&t+100<S[e].offsetTop;);if(q.forEach(e=>e.classList.remove("active")),q[e]){q[e].classList.add("active");let l=q[e],n=l.getBoundingClientRect(),r=n.top,a=n.left;window.innerWidth<=844?(console.log(a),b.style.left=`${a}px`,b.style.top=`${r}px`,b.style.marginLeft="5px",b.style.marginTop="10px"):(b.style.top=`${r}px`,b.style.left="0px",b.style.marginLeft="28px",b.style.marginTop="10px")}}k(),window.addEventListener("scroll",k),$.addEventListener("scroll",k);let _="",H="";window.addEventListener("resize",function(){document.body.classList.add("resize-animation-stopper"),H=(_="".getBoundingClientRect()).top+window.scrollY,b.style.top=`${H}px`,setTimeout(function(e){document.body.classList.remove("resize-animation-stopper")},250)}),unBlurOnView(I)});var i,acc=document.getElementsByClassName("accordion");for(i=0;i<acc.length;i++)acc[i].addEventListener("click",function(){for(var e=0;e<acc.length;e++)if(acc[e]!==this&&acc[e].classList.contains("active")){acc[e].classList.remove("active");var t=acc[e].nextElementSibling;t.style.maxHeight&&(t.style.maxHeight=null)}this.classList.toggle("active");var t=this.nextElementSibling;t.style.maxHeight?t.style.maxHeight=null:t.style.maxHeight=t.scrollHeight+"px"});window.addEventListener("scroll",()=>{console.log(window.scrollY)});